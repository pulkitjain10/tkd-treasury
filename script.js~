function init(banner){
    banner.addEventListener('click', acceptPW);
    function acceptPW(){
	banner.innerHTML = html1;
	removeEL();
    };
    function removeEL(){
	banner.removeEventListener('click', acceptPW);
    };
};
function checkForm(form){
    xhr.open("POST", "http://localhost:5000/check", true);
    xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    pw.password= form.password.value;
    xhr.send(JSON.stringify(pw));
    xhr.onreadystatechange= function(){
	if(xhr.status === 200 && xhr.readyState === 4){
	    exitPage(banner);
	}
	else if(xhr.status === 400){	    
	    banner.innerHTML = html2;
	    document.getElementById('password').focus();
	}
    };
};
function exitPage(banner){
    banner.innerHTML = html3;
    setTimeout(function(){
	window.location = '/records.html';
    }, 900);
};

var xhr= new XMLHttpRequest();
var banner, html1, html2, html3, pw;
window.onload= function(){
    banner= document.getElementById("banner");
    html1= '<style>h1{-webkit-animation: fadein 0.5s;animation: fadein 0.5s;}form{-webkit-animation: fadein 0.5s;animation: fadein 0.5s;}#banner{-webkit-filter: invert(1);filter: invert(1);transition: max-height 0.125s ease-out; -webkit-transition: max-height 0.125s ease-out; max-height: 215px;}</style><img src="tkd-symbol.png" alt="tkd-symbol"/><h1>ENTER PASSWORD</h1><form onsubmit="checkForm(this); return false;"><input type="password" autofocus="autofocus" id="password"><input type="submit"></form>';
    html2= '<style>#banner{-webkit-filter: invert(1);filter: invert(1);transition: max-height 0.45s linear; -webkit-transition: max-height 0.45s linear; max-height: 400px;}</style><img src="tkd-symbol.png" alt="tkd-symbol"/><h1>ENTER PASSWORD</h1><form onsubmit="checkForm(this); return false;"><input type="password" autofocus="autofocus" id="password"><input type="submit"></form><p class="error">Incorrect Password</p>';
    html3= '<style>body{-webkit-animation: fadeout 1.20s;animation: fadeout 1.2xs0s;}#banner{-webkit-filter: invert(1);filter: invert(1);transition: max-height 0.45s linear; -webkit-transition: max-height 0.45s linear; max-height: 400px;}</style><img src="tkd-symbol.png" alt="tkd-symbol"/><h1>ENTER PASSWORD</h1><form onsubmit="checkForm(this); return false;"><input type="password" autofocus="autofocus" id="password"><input type="submit"></form><p class="correct">Correct Password</p>';
    pw = { password: "" };
    init(banner);
};
